<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors Game</title>
</head>

<body>
    <script type="text/javascript">
        /**
         * the function computerPlay() generates a random number 1-3.
         * based off that number it returns an input for rock paper scissors game
         * 1 = rock, 2 = paper, 3 = scissors
         */
        function computerPlay() {
            const min = 1;
            const max = 3;
            const rock = "Rock";
            const paper = "Paper";
            const scissors = "Scissors";

            var randomNum = Math.floor(Math.random() * 3) + 1; // generate random num between 1-3

            if (randomNum === 1) {
                return rock;
            }
            else if (randomNum === 2) {
                return paper;
            }
            else if (randomNum === 3) {
                return scissors;
            }
        }

        /**
         * the function playGame() plays rock paper scissors game
         */
        function playGame(userInput, computerInput) {
            const rock = "ROCK";
            const paper = "PAPER";
            const scissors = "SCISSORS";
            var userInputCap = userInput.toUpperCase();
            var computerInputCap = computerInput.toUpperCase();

            var outputStr = "";

            if (userInputCap == rock && computerInputCap == scissors ||
                userInputCap == paper && computerInputCap == rock ||
                userInputCap == scissors && computerInputCap == paper) {
                outputStr = "Game Results:<br>Computer Chose: " + computerInput +
                    "<br>User Chose: " + userInput +
                    "<br>You win! " + userInput + " Beats " + computerInput + "<br><br>";
                return outputStr;
            }
            else if (computerInputCap == rock && userInputCap == scissors ||
                computerInputCap == paper && userInputCap == rock ||
                computerInputCap == scissors && userInputCap == paper) {
                outputStr = "Game Results:<br>Computer Chose: " + computerInput +
                    "<br>User Chose: " + userInput +
                    "<br>Computer wins! " + computerInput + " Beats " + userInput + "<br><br>";
                return outputStr;
            }
            else if (userInputCap == computerInputCap) {
                outputStr = "Game Results:<br>Computer Chose: " + computerInput +
                    "<br>User Chose: " + userInput + "<br>It's A Tie!" + "<br><br>";
                return outputStr;
            }
        }

        /**
         * the function findWinner() finds winner of current game being played 
         */
        function findWinner(userInput, computerInput) {
            const rock = "ROCK";
            const paper = "PAPER";
            const scissors = "SCISSORS";

            const userWins = "user";
            const compWins = "computer";
            const tie = "tie";

            var userInputCap = userInput.toUpperCase();
            var computerInputCap = computerInput.toUpperCase();

            var outputStr = "";

            if (userInputCap == rock && computerInputCap == scissors ||
                userInputCap == paper && computerInputCap == rock ||
                userInputCap == scissors && computerInputCap == paper) {
                return userWins;
            }
            else if (computerInputCap == rock && userInputCap == scissors ||
                computerInputCap == paper && userInputCap == rock ||
                computerInputCap == scissors && userInputCap == paper) {
                return compWins;
            }
            else if (userInputCap == computerInputCap) {
                return tie;
            }
        }

        /**
         * the function getUserInput() gets user input and 
         * makes sure the user enterd "rock", "paper", or 'scissors".
         * user input is not case sensitive.
         */
        function getUserInput() {
            const rock = "ROCK";
            const paper = "PAPER";
            const scissors = "SCISSORS";

            var validInput = false; // flag for correct user input

            while (!validInput) {
                var userInput = prompt("Please Enter \"Rock\", \"Paper\" or \"Scissors\"");

                var userInputCap = userInput.toUpperCase(); // user input capitalized

                if (userInputCap == rock || userInputCap == paper || userInputCap == scissors) {
                    // if user input is correct
                    validInput = true; // remove flag
                    return userInput; // return user input
                }
                else {
                    alert("Error: Invalid Input\nPlease Try Again."); // error message for invalid input
                }
            }
        }

        /**
         * the function game() plays the rock paper scissor game 5 times and
         * prints total results of all games and prints each game results
         */
        function game() {
            const userWins = "user";
            const compWins = "computer";
            const tie = "tie";

            var userInput = "";
            var computerInput = "";
            var gameResultsStr = ""
            var gameWinner = "";

            var tieCount = 0;
            var userWinCount = 0;
            var computerWinCount = 0;

            for (i = 0; i < 5; i++) {
                userInput = getUserInput(); // user input
                computerInput = computerPlay(); // computer input
                gameResultsStr = playGame(userInput, computerInput); // game string output
                gameWinner = findWinner(userInput, computerInput); // get game winner

                if (gameWinner == userWins) {
                    // if user wins add to total wins
                    userWinCount += 1;
                }
                else if (gameWinner == compWins) {
                    // if computer wins add to total wins
                    computerWinCount += 1;
                }
                else if (gameWinner == tie) {
                    // if tie add to total ties
                    tieCount += 1;
                }

                document.write(gameResultsStr);
            }

            var totalGameResults = "Total Computer Wins: " + computerWinCount +
                "<br>Total User Wins: " + userWinCount +
                "<br>Total Tie Count: " + tieCount;

            document.write(totalGameResults);
        }

        game(); // runs rock paper scissors game
    </script>
</body>

</html>